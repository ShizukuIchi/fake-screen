{"version":3,"sources":["src/mcdonalds/index.js"],"names":["render","setTimeout","start","mcdonalds","wrapper","document","querySelector","couponPage","coupons","header","hamburgerIcon","nextHamburgerIcon","title","nextTitle","how","nextHow","hamburger","status","exp","couponFooter","couponFooterText","onclick","handleExchange","e","preventDefault","openCouponPage","textContent","setExp","onExchange","date","Date","getFullYear","getMonth","getDate","style","height","innerHTML","clock","className","clockB","expTime","setMinutes","getMinutes","countDowner","CountDowner","getLast","formatFromCB","timeArray","toFixStr","on","setExpLast","exchangedExps","querySelectorAll","Array","from","forEach","exchangeExp","stop","onExpired","closeCouponPage","opacity","transform"],"mappings":"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","file":"mcdonalds.53ad66b9.map","sourceRoot":"..","sourcesContent":["import mcdonalds from './mcdonalds.pug';\nimport './mcdonalds.scss';\nimport clock from './clock.svg';\nimport clockB from './clock-b.svg';\nimport CountDowner from '../assets/CountDowner.js';\n\nexport const render = () => {\n  setTimeout(start);\n  return mcdonalds;\n};\n\nfunction start() {\n  const wrapper = document.querySelector('.mcdonalds-wrapper');\n  const couponPage = wrapper.querySelector('.coupon-page');\n  const coupons = wrapper.querySelector('.coupons');\n  const header = wrapper.querySelector('header');\n  const hamburgerIcon = header.querySelector('.hamburger img');\n  const nextHamburgerIcon = header.querySelector('.next-hamburger');\n  const title = header.querySelector('.title-text');\n  const nextTitle = header.querySelector('.next-title-text');\n  const how = header.querySelector('.how-text');\n  const nextHow = header.querySelector('.next-how-text');\n  const hamburger = header.querySelector('.hamburger');\n  const status = coupons.querySelector('.status');\n  const exp = coupons.querySelector('.exp');\n  const couponFooter = couponPage.querySelector('footer');\n  const couponFooterText = couponFooter.querySelector('.exchange');\n\n  status.onclick = handleExchange;\n  function handleExchange(e) {\n    e.preventDefault();\n    openCouponPage();\n  }\n  exp.textContent = setExp();\n  couponFooter.onclick = () => {\n    onExchange();\n  };\n  function setExp() {\n    const date = new Date();\n    return `期限：${date.getFullYear()} 年 ${date.getMonth() +\n      1} 月 ${date.getDate() + 3} 日`;\n  }\n  function onExchange() {\n    couponFooter.style.height = '90px';\n    couponFooterText.innerHTML = `<img class=\"clock\" src=${clock} alt=\"clock\"/>優惠倒數<span class=\"exchanged-exp\">2:00</span>`;\n    status.className = 'status exchange no-letter-spacing';\n    status.innerHTML = `<img class=\"clock\" src=${clockB} alt=\"clock\"/>優惠倒數<span class=\"exchanged-exp\">2:00</span>`;\n    const expTime = new Date();\n    expTime.setMinutes(expTime.getMinutes() + 2);\n    const countDowner = new CountDowner(expTime);\n    const getLast = countDowner.formatFromCB(\n      timeArray => ` ${timeArray[2]}:${countDowner.toFixStr(timeArray[3])}`,\n    );\n    countDowner.on('second', function setExpLast() {\n      try {\n        const exchangedExps = wrapper.querySelectorAll('.exchanged-exp');\n        Array.from(exchangedExps).forEach(\n          exchangeExp => (exchangeExp.textContent = getLast()),\n        );\n      } catch (e) {\n        countDowner.stop();\n      }\n    });\n    countDowner.on('stop', function onExpired() {\n      closeCouponPage();\n      status.onclick = () => {};\n      status.className = 'status';\n      status.textContent = '已兌換';\n    });\n  }\n  function openCouponPage() {\n    hamburgerIcon.style.opacity = '0';\n    nextHamburgerIcon.style.opacity = '100';\n    title.style.transform = `translateX(-200%)`;\n    title.style.opacity = '0';\n    nextTitle.style.transform = `translateX(0%)`;\n    nextTitle.style.opacity = '100';\n    how.style.opacity = '0';\n    nextHow.style.opacity = '100';\n    couponPage.style.transform = 'translateX(0%)';\n    hamburger.onclick = closeCouponPage;\n  }\n  function closeCouponPage() {\n    couponPage.style.transform = 'translateX(100%)';\n    hamburgerIcon.style.opacity = '100';\n    nextHamburgerIcon.style.opacity = '0';\n    title.style.transform = `translateX(0%)`;\n    title.style.opacity = '100';\n    nextTitle.style.transform = `translateX(200%)`;\n    nextTitle.style.opacity = '0';\n    how.style.opacity = '100';\n    nextHow.style.opacity = '0';\n    hamburger.onclick = () => {};\n  }\n}\n"]}