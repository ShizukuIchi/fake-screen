{"version":3,"sources":["src/ubuntu1804/index.js"],"names":["render","setTimeout","start","ubuntu","wrapper","document","querySelector","password","signIn","cancel","hint","addEventListener","submit","clear","key","style","animation","offsetWidth","textContent","value","length","setIdleTimer","timeModal","idleTimer","clearTimeout","onActive","openTimeModal","e","console","log","removeEventListener","includes","closeTimeModal","timeInterval","setTime","setInterval","transform","time","date","now","Date","formatDate","getDayStr","getDay","getMonthStr","getMonth","getDate","clearInterval","d","split","m","h","getHours","getMinutes"],"mappings":"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","file":"ubuntu1804.6814eb3a.map","sourceRoot":"..","sourcesContent":["import ubuntu from \"./ubuntu1804.pug\";\r\nimport \"./ubuntu1804.scss\";\r\n\r\nexport const render = () => {\r\n  setTimeout(start);\r\n  return ubuntu;\r\n};\r\n\r\nfunction start() {\r\n  const wrapper = document.querySelector(\".ubuntu1804-wrapper\");\r\n\r\n  const password = wrapper.querySelector(\"#password\");\r\n  const signIn = wrapper.querySelector(\"#sign-in\");\r\n  const cancel = wrapper.querySelector(\"#cancel\");\r\n  const hint = wrapper.querySelector(\".hint\");\r\n  password.addEventListener(\"keydown\", submit);\r\n  signIn.addEventListener(\"click\", submit);\r\n  cancel.addEventListener(\"click\", clear);\r\n  function submit({ key }) {\r\n    if (key && key !== \"Enter\") return;\r\n    hint.style.animation = \"\";\r\n    // a magic for replaying animation\r\n    void hint.offsetWidth;\r\n    hint.textContent = password.value.length\r\n      ? \"Wrong password.\"\r\n      : \"You must enter a password!\";\r\n    hint.style.animation = \"timeout 1.6s\";\r\n  }\r\n  function clear() {\r\n    password.value = \"\";\r\n  }\r\n  password.addEventListener(\"mousemove\", setIdleTimer);\r\n  document.addEventListener(\"keydown\", setIdleTimer);\r\n  const timeModal = wrapper.querySelector(\".ubuntu1804-time-modal\");\r\n\r\n  let idleTimer = null;\r\n  setIdleTimer();\r\n  function setIdleTimer() {\r\n    clearTimeout(idleTimer);\r\n    idleTimer = setTimeout(function() {\r\n      try {\r\n        timeModal.addEventListener(\"mousedown\", onActive);\r\n        document.addEventListener(\"keydown\", onActive);\r\n        openTimeModal();\r\n      } catch (e) {\r\n        console.log(e);\r\n        wrapper.removeEventListener(\"mousemove\", setIdleTimer);\r\n        document.removeEventListener(\"keydown\", setIdleTimer);\r\n      }\r\n    }, 6000);\r\n  }\r\n  function onActive({ key }) {\r\n    if (key && ![\"Enter\", \" \"].includes(key)) return;\r\n    setIdleTimer();\r\n    closeTimeModal();\r\n    timeModal.removeEventListener(\"mousedown\", onActive);\r\n    document.removeEventListener(\"keydown\", onActive);\r\n  }\r\n\r\n  let timeInterval = null;\r\n  setTime();\r\n  timeInterval = setInterval(setTime, 1000);\r\n  function openTimeModal() {\r\n    timeModal.style.transform = \"translateY(0%)\";\r\n  }\r\n  function closeTimeModal() {\r\n    timeModal.style.transform = \"translateY(-100%)\";\r\n  }\r\n  function setTime() {\r\n    try {\r\n      const time = timeModal.querySelector(\".time\");\r\n      const date = timeModal.querySelector(\".date\");\r\n      const now = new Date();\r\n      time.textContent = formatDate(now);\r\n      date.textContent = `${getDayStr(now.getDay())}, ${getMonthStr(\r\n        now.getMonth()\r\n      )} ${now.getDate()}`;\r\n    } catch (e) {\r\n      console.log(e);\r\n      clearInterval(timeInterval);\r\n    }\r\n  }\r\n}\r\n\r\nfunction getDayStr(d) {\r\n  return \"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday\".split(\",\")[\r\n    d\r\n  ];\r\n}\r\n\r\nfunction getMonthStr(m) {\r\n  return \"January,February,March,April,May,June,July,August,September,October,November,December\".split(\r\n    \",\"\r\n  )[m];\r\n}\r\n\r\nfunction formatDate(d) {\r\n  let h = d.getHours();\r\n  let m = d.getMinutes();\r\n  h = (h < 10 ? \"0\" : \"\") + h;\r\n  m = (m < 10 ? \"0\" : \"\") + m;\r\n  return `${h}:${m}`;\r\n}\r\n"]}