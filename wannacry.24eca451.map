{"version":3,"sources":["src/wannacry/CountDowner.js","src/wannacry/index.js"],"names":["CountDowner","till","setSeconds","getSeconds","callbacks","stop","second","toFixStr","bind","interval","origin","Date","start","year","getFullYear","month","getMonth","date","getDate","hour","getHours","minute","getMinutes","map","s","join","percentage","timeDiff","getTime","diffDays","Math","floor","diffHours","diffMinutes","e","setInterval","forEach","cb","clearInterval","str","Error","push","render","wannacry","setTimeout","pay","document","querySelector","payOn","payProgress","payment","lost","lostOn","lostProgress","check","decrypt","copy","now","payDate","lostDate","payCountDowner","innerHTML","formatLast","formatTill","on","style","height","progress","lostCountDowner","onclick","alert","addEventListener","setClipboardData","execCommand","event","preventDefault","clipboardData","setData","removeEventListener"],"mappings":"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","file":"wannacry.24eca451.map","sourceRoot":"..","sourcesContent":["class CountDowner {\r\n  constructor(till) {\r\n    till.setSeconds(till.getSeconds() + 1);\r\n    this.till = till;\r\n    this.callbacks = {\r\n      stop: [],\r\n      second: [],\r\n    };\r\n    this.toFixStr = this.toFixStr.bind(this);\r\n    this.interval = null;\r\n    this.origin = new Date();\r\n    this.start();\r\n  }\r\n  formatTill() {\r\n    const year = this.till.getFullYear();\r\n    const month = this.till.getMonth() + 1;\r\n    const date = this.till.getDate();\r\n    const hour = this.till.getHours();\r\n    const minute = this.till.getMinutes();\r\n    const second = this.till.getSeconds();\r\n    return (\r\n      [month, date, year].map(s => this.toFixStr(s)).join('/') +\r\n      ' ' +\r\n      [hour, minute, second].map(s => this.toFixStr(s)).join(':')\r\n    );\r\n  }\r\n  toFixStr(s) {\r\n    return (s < 10 ? '0' : '') + s;\r\n  }\r\n  progress() {\r\n    const percentage = this.timeDiff / (this.till.getTime() - this.origin);\r\n    return percentage < 0 ? 0 : percentage;\r\n  }\r\n  formatLast() {\r\n    const diffDays = Math.floor(this.timeDiff / (1000 * 3600 * 24));\r\n    const diffHours = Math.floor(this.timeDiff / (1000 * 3600));\r\n    const diffMinutes = Math.floor(this.timeDiff / (1000 * 60));\r\n    const diffSeconds = Math.floor(this.timeDiff / 1000);\r\n    return [\r\n      diffDays,\r\n      diffHours - diffDays * 24,\r\n      diffMinutes - diffHours * 60,\r\n      diffSeconds - diffMinutes * 60,\r\n    ]\r\n      .map(e => this.toFixStr(e))\r\n      .join(':');\r\n  }\r\n  start() {\r\n    this.timeDiff = this.till.getTime() - new Date().getTime();\r\n    this.interval = setInterval(() => {\r\n      this.timeDiff = this.till.getTime() - new Date().getTime();\r\n      if (this.timeDiff < 0) {\r\n        this.stop();\r\n      } else {\r\n        this.callbacks.second.forEach(cb => cb());\r\n      }\r\n    }, 1000);\r\n  }\r\n  stop() {\r\n    clearInterval(this.interval);\r\n    this.callbacks.stop.forEach(cb => cb());\r\n  }\r\n  on(str, cb) {\r\n    if (str in this.callbacks) {\r\n      this.callbacks[str].push(cb);\r\n    } else {\r\n      throw Error(`no ${str} type callback`);\r\n    }\r\n  }\r\n}\r\n\r\nexport default CountDowner;\r\n","import 'babel-polyfill';\r\nimport CountDowner from './CountDowner.js';\r\nimport './wannacry.scss';\r\nimport wannacry from './wannacry.pug';\r\n\r\nexport const render = () => {\r\n  setTimeout(start);\r\n  return wannacry;\r\n};\r\n\r\nfunction start() {\r\n  const pay = document.querySelector('#pay');\r\n  const payOn = document.querySelector('#pay-on');\r\n  const payProgress = document.querySelector('#pay-progress');\r\n  const payment = document.querySelector('#payment');\r\n  const lost = document.querySelector('#lost');\r\n  const lostOn = document.querySelector('#lost-on');\r\n  const lostProgress = document.querySelector('#lost-progress');\r\n  const check = document.querySelector('#check');\r\n  const decrypt = document.querySelector('#decrypt');\r\n  const copy = document.querySelector('#copy');\r\n\r\n  const now = new Date();\r\n  const payDate = new Date(\r\n    now.getFullYear(),\r\n    now.getMonth(),\r\n    now.getDate(),\r\n    now.getHours(),\r\n    now.getMinutes() + 10,\r\n    now.getSeconds(),\r\n  );\r\n  const lostDate = new Date(\r\n    now.getFullYear(),\r\n    now.getMonth(),\r\n    now.getDate(),\r\n    now.getHours() + 1,\r\n    now.getMinutes(),\r\n    now.getSeconds(),\r\n  );\r\n  const payCountDowner = new CountDowner(payDate);\r\n  pay.innerHTML = payCountDowner.formatLast();\r\n  payOn.innerHTML = payCountDowner.formatTill();\r\n  payCountDowner.on('second', () => {\r\n    payProgress.style.height = `${(1 - payCountDowner.progress()) * 100}%`;\r\n    pay.innerHTML = payCountDowner.formatLast();\r\n  });\r\n  payCountDowner.on('stop', () => {\r\n    payProgress.style.height = `${(1 - payCountDowner.progress()) * 100}%`;\r\n    payment.innerHTML = '$600';\r\n  });\r\n  const lostCountDowner = new CountDowner(lostDate);\r\n  lost.innerHTML = lostCountDowner.formatLast();\r\n  lostOn.innerHTML = lostCountDowner.formatTill();\r\n  lostCountDowner.on('second', () => {\r\n    lostProgress.style.height = `${(1 - lostCountDowner.progress()) * 100}%`;\r\n    lost.innerHTML = lostCountDowner.formatLast();\r\n  });\r\n  lostCountDowner.on('stop', () => {\r\n    lostProgress.style.height = `${(1 - lostCountDowner.progress()) * 100}%`;\r\n  });\r\n\r\n  check.onclick = () => {\r\n    alert(\r\n      `You didn't pay!\\nYour files will be lost on ${lostCountDowner.formatTill()}!`,\r\n    );\r\n  };\r\n  decrypt.onclick = () => {\r\n    alert(`Decrypt failed!\\nPlease click <Contact Us>!`);\r\n  };\r\n  copy.onclick = function(e) {\r\n    document.addEventListener('copy', setClipboardData);\r\n    document.execCommand('copy');\r\n    alert('Content copied Successfully!');\r\n  };\r\n}\r\n\r\nfunction setClipboardData(event) {\r\n  event.preventDefault();\r\n  if (event.clipboardData) {\r\n    event.clipboardData.setData(\r\n      'text/plain',\r\n      'Money! Give me Money! ლ(́◉◞౪◟◉‵ლ)',\r\n    );\r\n  }\r\n  document.removeEventListener('copy', setClipboardData);\r\n}\r\n"]}