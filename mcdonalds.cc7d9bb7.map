{"version":3,"sources":["src/mcdonalds/index.js"],"names":["render","mcdonalds","setTimeout","start","wrapper","date","document","querySelector","couponPage","coupons","header","hamburgerIcon","nextHamburgerIcon","title","nextTitle","how","nextHow","hamburger","status","exp","couponFooter","couponFooterText","closeCouponPage","style","transform","opacity","onclick","handleExchange","e","preventDefault","textContent","Date","getFullYear","getMonth","getDate","onExchange","height","innerHTML","clock","className","clockB","expTime","setMinutes","getMinutes","countDowner","CountDowner","getLast","formatFromCB","timeArray","toFixStr","on","exchangedExps","querySelectorAll","Array","from","forEach","exchangeExp","stop"],"mappings":";;;;;;;AA8FC,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,YAAA,EA9FD,IAAA,EAAA,EAAA,QAAA,oBACA,QAAA,oBACA,IAAA,EAAA,EAAA,QAAA,gBACA,EAAA,EAAA,QAAA,kBACA,EAAA,EAAA,QAAA,6BA0FC,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAxFM,IAAMA,EAAS,WAEbC,OADPC,WAAWC,GACJF,EAAP,SAGF,SAASE,IACDC,IA0BEC,EA1BFD,EAAUE,SAASC,cAAc,sBACjCC,EAAaJ,EAAQG,cAAc,gBACnCE,EAAUL,EAAQG,cAAc,YAChCG,EAASN,EAAQG,cAAc,UAC/BI,EAAgBD,EAAOH,cAAc,kBACrCK,EAAoBF,EAAOH,cAAc,mBACzCM,EAAQH,EAAOH,cAAc,eAC7BO,EAAYJ,EAAOH,cAAc,oBACjCQ,EAAML,EAAOH,cAAc,aAC3BS,EAAUN,EAAOH,cAAc,kBAC/BU,EAAYP,EAAOH,cAAc,cACjCW,EAAST,EAAQF,cAAc,WAC/BY,EAAMV,EAAQF,cAAc,QAC5Ba,EAAeZ,EAAWD,cAAc,UACxCc,EAAmBD,EAAab,cAAc,aAwD3Ce,SAAAA,IACPd,EAAWe,MAAMC,UAAY,mBAC7Bb,EAAcY,MAAME,QAAU,MAC9Bb,EAAkBW,MAAME,QAAU,IAClCZ,EAAMU,MAAMC,UAAZ,iBACAX,EAAMU,MAAME,QAAU,MACtBX,EAAUS,MAAMC,UAAhB,mBACAV,EAAUS,MAAME,QAAU,IAC1BV,EAAIQ,MAAME,QAAU,MACpBT,EAAQO,MAAME,QAAU,IACxBR,EAAUS,QAAU,aAhEtBR,EAAOQ,QACEC,SAAeC,GACtBA,EAAEC,iBAyCFlB,EAAcY,MAAME,QAAU,IAC9Bb,EAAkBW,MAAME,QAAU,MAClCZ,EAAMU,MAAMC,UAAZ,oBACAX,EAAMU,MAAME,QAAU,IACtBX,EAAUS,MAAMC,UAAhB,iBACAV,EAAUS,MAAME,QAAU,MAC1BV,EAAIQ,MAAME,QAAU,IACpBT,EAAQO,MAAME,QAAU,MACxBjB,EAAWe,MAAMC,UAAY,iBAC7BP,EAAUS,QAAUJ,GA/CtBH,EAAIW,aAKIzB,EAAO,IAAI0B,KACJ1B,MAAAA,OAAAA,EAAK2B,cAAmB3B,OAAAA,OAAAA,EAAK4B,WACxC,EAAO5B,OAAAA,OAAAA,EAAK6B,UAAY,EAD1B,OALFd,EAAaM,QAAU,YAQdS,WACPf,EAAaG,MAAMa,OAAS,OAC5Bf,EAAiBgB,UAAsCC,0BAAAA,OAAAA,EAAvD,QAAA,6DACApB,EAAOqB,UAAY,oCACnBrB,EAAOmB,UAAsCG,0BAAAA,OAAAA,EAA7C,QAAA,6DACMC,IAAAA,EAAU,IAAIV,KACpBU,EAAQC,WAAWD,EAAQE,aAAe,GACpCC,IAAAA,EAAc,IAAIC,EAAJ,QAAgBJ,GAC9BK,EAAUF,EAAYG,aAC1B,SAAAC,GAAiBA,MAAAA,IAAAA,OAAAA,EAAU,GAAMJ,KAAAA,OAAAA,EAAYK,SAASD,EAAU,OAElEJ,EAAYM,GAAG,SAAU,WACnB,IACIC,IAAAA,EAAgB/C,EAAQgD,iBAAiB,kBAC/CC,MAAMC,KAAKH,GAAeI,QACxB,SAAAC,GAAgBA,OAAAA,EAAY1B,YAAcgB,MAE5C,MAAOlB,GACPgB,EAAYa,UAGhBb,EAAYM,GAAG,OAAQ,WACrB5B,IACAJ,EAAOQ,QAAU,aACjBR,EAAOqB,UAAY,SACnBrB,EAAOY,YAAc,QAhCvBK,IA2DH,QAAA,OAAA","file":"mcdonalds.cc7d9bb7.map","sourceRoot":"..","sourcesContent":["import mcdonalds from './mcdonalds.pug';\nimport './mcdonalds.scss';\nimport clock from './clock.svg';\nimport clockB from './clock-b.svg';\nimport CountDowner from '../assets/CountDowner.js';\n\nexport const render = () => {\n  setTimeout(start);\n  return mcdonalds;\n};\n\nfunction start() {\n  const wrapper = document.querySelector('.mcdonalds-wrapper');\n  const couponPage = wrapper.querySelector('.coupon-page');\n  const coupons = wrapper.querySelector('.coupons');\n  const header = wrapper.querySelector('header');\n  const hamburgerIcon = header.querySelector('.hamburger img');\n  const nextHamburgerIcon = header.querySelector('.next-hamburger');\n  const title = header.querySelector('.title-text');\n  const nextTitle = header.querySelector('.next-title-text');\n  const how = header.querySelector('.how-text');\n  const nextHow = header.querySelector('.next-how-text');\n  const hamburger = header.querySelector('.hamburger');\n  const status = coupons.querySelector('.status');\n  const exp = coupons.querySelector('.exp');\n  const couponFooter = couponPage.querySelector('footer');\n  const couponFooterText = couponFooter.querySelector('.exchange');\n\n  status.onclick = handleExchange;\n  function handleExchange(e) {\n    e.preventDefault();\n    openCouponPage();\n  }\n  exp.textContent = setExp();\n  couponFooter.onclick = () => {\n    onExchange();\n  };\n  function setExp() {\n    const date = new Date();\n    return `期限：${date.getFullYear()} 年 ${date.getMonth() +\n      1} 月 ${date.getDate() + 3} 日`;\n  }\n  function onExchange() {\n    couponFooter.style.height = '90px';\n    couponFooterText.innerHTML = `<img class=\"clock\" src=${clock} alt=\"clock\"/>優惠倒數<span class=\"exchanged-exp\">2:00</span>`;\n    status.className = 'status exchange no-letter-spacing';\n    status.innerHTML = `<img class=\"clock\" src=${clockB} alt=\"clock\"/>優惠倒數<span class=\"exchanged-exp\">2:00</span>`;\n    const expTime = new Date();\n    expTime.setMinutes(expTime.getMinutes() + 2);\n    const countDowner = new CountDowner(expTime);\n    const getLast = countDowner.formatFromCB(\n      timeArray => ` ${timeArray[2]}:${countDowner.toFixStr(timeArray[3])}`,\n    );\n    countDowner.on('second', function setExpLast() {\n      try {\n        const exchangedExps = wrapper.querySelectorAll('.exchanged-exp');\n        Array.from(exchangedExps).forEach(\n          exchangeExp => (exchangeExp.textContent = getLast()),\n        );\n      } catch (e) {\n        countDowner.stop();\n      }\n    });\n    countDowner.on('stop', function onExpired() {\n      closeCouponPage();\n      status.onclick = () => {};\n      status.className = 'status';\n      status.textContent = '已兌換';\n    });\n  }\n  function openCouponPage() {\n    hamburgerIcon.style.opacity = '0';\n    nextHamburgerIcon.style.opacity = '100';\n    title.style.transform = `translateX(-200%)`;\n    title.style.opacity = '0';\n    nextTitle.style.transform = `translateX(0%)`;\n    nextTitle.style.opacity = '100';\n    how.style.opacity = '0';\n    nextHow.style.opacity = '100';\n    couponPage.style.transform = 'translateX(0%)';\n    hamburger.onclick = closeCouponPage;\n  }\n  function closeCouponPage() {\n    couponPage.style.transform = 'translateX(100%)';\n    hamburgerIcon.style.opacity = '100';\n    nextHamburgerIcon.style.opacity = '0';\n    title.style.transform = `translateX(0%)`;\n    title.style.opacity = '100';\n    nextTitle.style.transform = `translateX(200%)`;\n    nextTitle.style.opacity = '0';\n    how.style.opacity = '100';\n    nextHow.style.opacity = '0';\n    hamburger.onclick = () => {};\n  }\n}\n"]}